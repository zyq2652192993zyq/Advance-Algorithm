> # 动态规划-插头DP

插头DP也被称为轮廓线DP，最先由陈丹绮提出，以及CDQ分治。

参考资料：

* <https://www.cnblogs.com/zinthos/p/3897854.html>

典型题目：

HDU 1693 Eat the Trees

多回路经过所有格子的方案数。

不需要记录连通性，最简单的题，对所有空格子都考虑适当的插头即可。

URAL 1519 Formula 1

单回路经过所有格子的方案数。

记录连通性的入门题，要保证只在最后一个格子形成回路。

FZU 1977 Pandora adventure 

单回路数，格子有了三种：障碍格子、必选格子和可选格子。

在编码时添加一位标志，表示是否形成了回路，如果形成了回路后还遇到了必选格子，就废弃掉这个状态。

HDU 1964 Pipes

单回路求最小花费。

求花费的题，在哈希时改为记录当前的最佳值。在最后一个格子判断才能形成回路。

HDU 3377 Plan

从左上角走到右下角，可选格子，每个格子有个分数，求最大分数。

对左上和右下的格子单独进行处理，左上的格子只能有向下或向右的插头，而右下的格子只能有向上和向左的插头，不能形成回路。

POJ 1739 Tony's Tour

从左下角走到右下角，每个非障碍格子仅走一次的方法数。

在最后添加两行，倒数第二行中间部分全设置为障碍。然后求一条回路的方案数即可。

POJ 3133 Manhattan Wiring

格子中有两个2，两个3.求把两个2连起来，两个3连起来。 两条路径不能交叉。

对2和3的点单独进行考虑，格子上不能形成回路，而且只有出入两种可能，加上方向只有四种可能。

连通性只有两个选择2或3。对于不确定2还是3的普通格子就两个都尝试一下。

ZOJ 3466 The Hive II

多回路走有障碍的六边形格子，求方案数。

将格子行列颠倒一下，发现一个格子有6个方向的插头，左右，加上上边两个下边两个。

将code数组扩展成两倍，一个格子占用code数组中的三个元素，code[2*j-2]为左边的插头，code[2*j-1]为左上的插头，code[2*j]为右上的插头。

按照不同情况进行推导之后，将code[2*j-2]为左下的插头，code[2*j-1]为右下的插头，code[2*j]为右边的插头。这样下一个格子仍然可以从code中取到合适的信息。

而奇数行与偶数行的左下与右下坐标的计算方法是不同的，这个要注意处理，而且由于六边形的特殊性，只有偶数行才需要shift操作。

ZOJ 3213 Beautiful Meadow

简单路径得到最大的分数。

HDU 4285 circuits

求K个回路的方案数。不能环套环。

将当前的闭合回路数压入状态中。 

对于环套环，如果当前格子左边有奇数个不同连通分量的插头，那么如果在左上形成闭合的回路，那么就会出现环套环的情况，只要对这种情况跳过即可。